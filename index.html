<!DOCTYPE html>
<html lang="en">
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>
<script
  src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js">
</script>
       
<head>
<meta charset="UTF-8">
<title>Haulier Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
 
<style>
body {
  margin: 0;
  font-family: 'Arial', sans-serif;
  background: radial-gradient(circle at top, #2a2a2a, #0a0a0a);
  color: #f5f5f5;
}

header {
  background: linear-gradient(90deg, #111, #222);
  padding: 15px 20px;
  display: flex;
  align-items: center;
  border-bottom: 2px solid #444;
}

.logo {
  width: 70px;
  height: 70px;
  margin-right: 18px;
  display: block;
  animation: spin 4s linear infinite;
  transform-origin: 50% 50%;
}

}

}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

h1 {
  font-size: 24px;
  letter-spacing: 2px;
}

.container {
  display: flex;
}

nav {
  width: 220px;
  background: #111;
  border-right: 2px solid #333;
  padding-top: 20px;
}

nav button {
  width: 100%;
  background: none;
  border: none;
  color: #ddd;
  padding: 15px;
  text-align: left;
  font-size: 16px;
  cursor: pointer;
}

nav button:hover {
  background: #222;
}

main {
  flex: 1;
  padding: 25px;
}

.section {
  display: none;
  opacity: 0;
  transform: translateY(10px);
  transition: opacity 0.6s ease, transform 0.6s ease;
transition: opacity 0.6s ease, transform 0.6s ease;

}

.section.active {
  display: block;
  opacity: 1;
  transform: translateY(0);
}

}

.section.active {
  display: block;
}

.card {
  background: linear-gradient(145deg, #1b1b1b, #0e0e0e);
  padding: 20px;
  border-radius: 10px;
  box-shadow: inset 0 0 15px #000;
  margin-bottom: 20px;
}

input, select {
  width: 100%;
  padding: 10px;
  margin-top: 10px;
  border-radius: 5px;
  border: none;
}

button.action {
  margin-top: 15px;
  padding: 12px;
  background: #800020;
  color: white;
  border: none;
  border-radius: 5px;
  font-size: 16px;
}
</style>
</head>
 
<body>

<header>
  <img src="IMG_1055.jpg" class="logo" alt="FMX Logo">

  <h1>HAULIER PRO</h1>
</header>

<div class="container">

<nav>
  <button onclick="showSection('dashboard')">Dashboard</button>
  <button onclick="showSection('routes')">Route Planner</button>
  <button onclick="showSection('loads')">Loads & Fleet</button>
  <button onclick="showSection('materials')">Materials & Suppliers</button>
  <button onclick="showSection('waste')">Waste & Compliance</button>
</nav>

<main>

<div id="dashboard" class="section active">
  <div class="card">
    <h2>Welcome</h2>
    <p>Haulier Pro helps plan routes, loads, materials and compliance under UK rules.</p>
  </div>
</div>

<div id="routes" class="section">
  <div class="card">
    <h2>Route Planner</h2>
    <label>Depot postcode</label>
    <input placeholder="e.g. SW1A 1AA">

    <label>Point A</label>
    <input placeholder="Collection address">

    <label>Point B</label>
    <input placeholder="Delivery address">

    <button class="action" onclick="calculateRoute()">Calculate Route</button>

    <div id="map" style="
  height: 300px;
  margin-top: 15px;
  border-radius: 10px;
  overflow: hidden;
"></div>

  </div>
</div>

<div id="loads" class="section">
  <div class="card">
    <h2>Loads & Fleet</h2>
    <label>Total tonnage</label>
    <input placeholder="e.g. 800">

    <label>Truck payload (tonnes)</label>
    <input placeholder="e.g. 20">

    <label>Number of trucks</label>
    <input placeholder="e.g. 4">

    <button class="action">Calculate Loads (Demo)</button>
  </div>
</div>

<div id="materials" class="section">
  <div class="card">
    <h2>Materials & Suppliers</h2>
    <label>Upload materials list</label>
    <input type="file">
    <p>Supplier optimisation will recommend cheapest / closest supplier.</p>
  </div>
</div>

<div id="waste" class="section">
  <div class="card">
    <h2>Waste & Compliance</h2>
    <label>Upload SI / WAC report</label>
    <input type="file">
    <p>System will flag contamination not suitable for inert landfill.</p>
  </div>
</div>

</main>
</div>

<script>
function showSection(id) {
  const sections = document.querySelectorAll('.section');
  sections.forEach(section => {
    section.classList.remove('active');
  });
let map;

function showSection(id) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  const target = document.getElementById(id);
  setTimeout(() => {
    target.classList.add('active');

    if (id === 'routes') {
      setTimeout(loadMap, 200);
    }
  }, 50);
}

function loadMap() {
  if (map) return;

  map = L.map('map').setView([51.5074, -0.1278], 10);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '© OpenStreetMap'
  }).addTo(map);
}

}

document.querySelector("button[onclick="showSection('routes')"
  .addEventListener('click', () => {
    setTimeout(initMap, 300);
  });

  const target = document.getElementById(id);
  setTimeout(() => {
    target.classList.add('active');
  }, 50);
}
</script>
<script>
let map = null;

function showSection(id) {
  // Hide all sections
  document.querySelectorAll('.section').forEach(section => {
    section.classList.remove('active');
  });

  // Show selected section
  const target = document.getElementById(id);
  target.classList.add('active');

  // Load map only when Route Planner is opened
  if (id === 'routes') {
    setTimeout(initMap, 300);
  }
}

function initMap() {
  async function geocode(address) {
  const url = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(address)}`;
  const res = await fetch(url);
  const data = await res.json();
  if (!data.length) return null;
  return [parseFloat(data[0].lat), parseFloat(data[0].lon)];
}

let routeLine;

async function calculateRoute() {
  if (!map) return alert("Map not ready");

  const depot = document.getElementById('depot').value;
  const a = document.getElementById('pointA').value;
  const b = document.getElementById('pointB').value;

  if (!depot || !a || !b) {
    alert("Please enter depot, Point A and Point B");
    return;
  }

  const depotCoords = await geocode(depot);
  const aCoords = await geocode(a);
  const bCoords = await geocode(b);

  if (!depotCoords || !aCoords || !bCoords) {
    alert("Could not find one of the addresses");
    return;
  }

  const points = [depotCoords, aCoords, bCoords, depotCoords];

  if (routeLine) map.removeLayer(routeLine);

  routeLine = L.polyline(points, { color: '#caa24d', weight: 4 }).addTo(map);
  map.fitBounds(routeLine.getBounds());

  const distance = calculateDistance(points);
  alert(`Estimated distance: ${distance.toFixed(1)} miles`);
}

  if (map !== null) return;

  map = L.map('map').setView([51.5074, -0.1278], 10);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '© OpenStreetMap'
  }).addTo(map);
}
</script>
function calculateDistance(points) {
  let total = 0;

  for (let i = 0; i < points.length - 1; i++) {
    total += haversine(points[i], points[i + 1]);
  }
  return total;
}

function haversine(p1, p2) {
  const R = 3959; // miles
  const dLat = (p2[0] - p1[0]) * Math.PI / 180;
  const dLon = (p2[1] - p1[1]) * Math.PI / 180;
  const lat1 = p1[0] * Math.PI / 180;
  const lat2 = p2[0] * Math.PI / 180;

  const a =
    Math.sin(dLat / 2) * Math.sin(dLat / 2) +
    Math.sin(dLon / 2) * Math.sin(dLon / 2) *
    Math.cos(lat1) * Math.cos(lat2);

  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  return R * c;
}
 

</script>

</body>
</html>
 
 
